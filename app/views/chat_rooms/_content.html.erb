<div class="chat_room " data-chat-room-channel-target="textarea">
  <div class="avatar">
      <%= image_tag(content.user.avatar_url || content.user.imageurl || "default_user", class:'w-full h-full') %>
  </div>
  <div class="content_box">
    <div class="flex justify-start items-center">
      <div class="speaker " data-chat-room-channel-target="nickname"><%= content.user.nickname %></div>
      <div class="pl-2 text-gray-400">
      <% if content.created_at.to_s(:md_on_today_zh_tw) == Time.now.to_s(:md_on_today_zh_tw)%> 
        <%= content.created_at.to_s(:message_at) %>
      <% else %>
        <%= content.created_at.to_s(:long_no_separator)%>
      <% end %>
      </div>
    </div>
    <div class="content_text">
    <%if content.text.include?("https" || "http")%>
      <a href="<%=content.text %>" class="text-md hover:underline hover:text-blue-700"><%= content.text %></a>
    <% else%>
      <%= content.text%>
    <% end %>
      <% if content.image %>
      <div class="relative">
        <%= image_tag(url_for(content.image_url) , size:'150x150') if content.image %>
        <a href="<%=content.image.download_url%>" download="" class='absolute bottom-1 left-1'>
          <i class="fas fa-cloud-download-alt text-2xl"></i>
        </a>
      </div>
      <% end %>
    </div>
  </div>
</div> 
